// Adicionar ao schema.prisma principal

model EmailLog {
  id           String   @id @default(uuid()) @db.Uuid
  templateId   String?  @map("template_id") @db.VarChar(100)
  fromEmail    String   @map("from_email") @db.VarChar(255)
  fromName     String?  @map("from_name") @db.VarChar(255)
  toEmail      String   @map("to_email") @db.VarChar(255)
  toName       String?  @map("to_name") @db.VarChar(255)
  subject      String   @db.VarChar(500)
  htmlContent  String?  @map("html_content") @db.Text
  textContent  String?  @map("text_content") @db.Text
  status       String   @default("pending") @db.VarChar(50) // pending, sent, delivered, failed, used
  provider     String?  @db.VarChar(50)
  providerId   String?  @map("provider_id") @db.VarChar(255)
  metadata     Json?
  error        String?  @db.Text
  sentAt       DateTime? @map("sent_at") @db.Timestamptz(6)
  deliveredAt  DateTime? @map("delivered_at") @db.Timestamptz(6)
  openedAt     DateTime? @map("opened_at") @db.Timestamptz(6)
  clickedAt    DateTime? @map("clicked_at") @db.Timestamptz(6)
  bounced      Boolean  @default(false)
  createdAt    DateTime @default(now()) @map("created_at") @db.Timestamptz(6)
  updatedAt    DateTime @updatedAt @map("updated_at") @db.Timestamptz(6)

  @@index([toEmail], map: "idx_email_log_to_email")
  @@index([status], map: "idx_email_log_status")
  @@index([subject], map: "idx_email_log_subject")
  @@index([createdAt], map: "idx_email_log_created_at")
  @@map("email_logs")
}
